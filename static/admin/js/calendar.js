function Calendar(e,t,r){this.div_id=e,this.callback=t,this.today=new Date,this.currentMonth=this.today.getMonth()+1,this.currentYear=this.today.getFullYear(),"undefined"!=typeof r&&(this.selected=r)}var CalendarNamespace={monthsOfYear:gettext("January February March April May June July August September October November December").split(" "),daysOfWeek:gettext("S M T W T F S").split(" "),firstDayOfWeek:parseInt(get_format("FIRST_DAY_OF_WEEK")),isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){var r;return r=1==e||3==e||5==e||7==e||8==e||10==e||12==e?31:4==e||6==e||9==e||11==e?30:2==e&&CalendarNamespace.isLeapYear(t)?29:28},draw:function(e,t,r,a,n){var i=new Date,s=i.getDate(),c=i.getMonth()+1,u=i.getFullYear(),d="",h=!1;"undefined"!=typeof n&&(h=n.getUTCFullYear()==t&&n.getUTCMonth()+1==e),e=parseInt(e),t=parseInt(t);var o=document.getElementById(r);removeChildren(o);var l=document.createElement("table");quickElement("caption",l,CalendarNamespace.monthsOfYear[e-1]+" "+t);for(var m=quickElement("tbody",l),f=quickElement("tr",m),p=0;7>p;p++)quickElement("th",f,CalendarNamespace.daysOfWeek[(p+CalendarNamespace.firstDayOfWeek)%7]);var y=new Date(t,e-1,1-CalendarNamespace.firstDayOfWeek).getDay(),C=CalendarNamespace.getDaysInMonth(e,t);f=quickElement("tr",m);for(var p=0;y>p;p++){var v=quickElement("td",f," ");v.className="nonday"}for(var M=1,p=y;C>=M;p++){p%7==0&&1!=M&&(f=quickElement("tr",m)),d=M==s&&e==c&&t==u?"today":"",h&&M==n.getUTCDate()&&(""!=d&&(d+=" "),d+="selected");var g=quickElement("td",f,"","class",d);quickElement("a",g,M,"href","javascript:void("+a+"("+t+","+e+","+M+"));"),M++}for(;f.childNodes.length<7;){var v=quickElement("td",f," ");v.className="nonday"}o.appendChild(l)}};Calendar.prototype={drawCurrent:function(){CalendarNamespace.draw(this.currentMonth,this.currentYear,this.div_id,this.callback,this.selected)},drawDate:function(e,t,r){this.currentMonth=e,this.currentYear=t,r&&(this.selected=r),this.drawCurrent()},drawPreviousMonth:function(){1==this.currentMonth?(this.currentMonth=12,this.currentYear--):this.currentMonth--,this.drawCurrent()},drawNextMonth:function(){12==this.currentMonth?(this.currentMonth=1,this.currentYear++):this.currentMonth++,this.drawCurrent()},drawPreviousYear:function(){this.currentYear--,this.drawCurrent()},drawNextYear:function(){this.currentYear++,this.drawCurrent()}};